<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>繁體中文填空閃卡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/v4-shims.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF6B35',
                        secondary: '#4ECDC4',
                        accent: '#FFE66D',
                        dark: '#292F36'
                    },
                    fontFamily: {
                        chinese: ['Noto Sans TC', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .card-flip {
                transform-style: preserve-3d;
                transition: transform 0.6s;
            }
            .card-flipped {
                transform: rotateY(180deg);
            }
            .card-front, .card-back {
                backface-visibility: hidden;
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
            }
            .card-back {
                transform: rotateY(180deg);
            }
            .fill-blank {
                border-bottom: 3px solid #FF6B35;
                padding: 0 10px;
                margin: 0 5px;
                color: transparent;
                min-width: 60px;
                display: inline-block;
                text-align: center;
            }
            .answer-revealed {
                color: #292F36;
                background-color: #FFE66D;
                border-radius: 4px;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-green-50 min-h-screen font-chinese">
    <!-- 頁首 -->
    <header class="bg-primary text-white py-6 shadow-lg">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-[clamp(1.8rem,4vw,3rem)] font-bold mb-2">
                <i class="fa fa-book text-accent mr-3"></i>
                繁體中文填空閃卡
            </h1>
            <p class="text-[clamp(1rem,2vw,1.2rem)] opacity-90">《奇特的朋友》課文重點字詞練習</p>
        </div>
    </header>

    <!-- 主要內容 -->
    <main class="container mx-auto px-4 py-8">
        <!-- 控制區域 -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-8">
            <div class="flex flex-wrap justify-center gap-4 mb-6">
                <button onclick="prevCard()" class="bg-secondary hover:bg-secondary/90 text-white px-6 py-3 rounded-lg transition-all duration-300 transform hover:scale-105">
                    <i class="fa fa-arrow-left mr-2"></i>上一題
                </button>
                <button onclick="toggleAnswer()" class="bg-accent hover:bg-accent/90 text-dark px-6 py-3 rounded-lg transition-all duration-300 transform hover:scale-105">
                    <i class="fa fa-eye mr-2"></i>顯示答案
                </button>
                <button onclick="nextCard()" class="bg-primary hover:bg-primary/90 text-white px-6 py-3 rounded-lg transition-all duration-300 transform hover:scale-105">
                    下一題<i class="fa fa-arrow-right ml-2"></i>
                </button>
                <button onclick="showLessonInfo()" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg transition-all duration-300 transform hover:scale-105">
                    <i class="fa fa-info-circle mr-2"></i>課文說明
                </button>
            </div>
            
            <div class="flex justify-center gap-4">
                <button onclick="speakCurrent()" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg transition-all duration-300">
                    <i class="fa fa-volume-up mr-2"></i>朗讀題目
                </button>
                <button onclick="shuffleCards()" class="bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg transition-all duration-300">
                    <i class="fa fa-random mr-2"></i>隨機排序
                </button>
            </div>
        </div>

        <!-- 進度指示器 -->
        <div class="text-center mb-8">
            <div class="inline-block bg-white rounded-full px-6 py-3 shadow-md">
                <span id="currentCard" class="text-xl font-bold text-primary">1</span>
                <span class="text-gray-600">/</span>
                <span id="totalCards" class="text-xl font-bold text-gray-600">20</span>
                <span class="ml-4 text-gray-500">題目</span>
            </div>
        </div>

        <!-- 閃卡區域 -->
        <div class="max-w-4xl mx-auto perspective-1000">
            <div id="card" class="card-flip relative h-[400px] w-full">
                <!-- 卡片正面 (題目) -->
                <div class="card-front bg-white rounded-2xl shadow-xl p-8 flex flex-col justify-center items-center">
                    <div class="w-full">
                        <h2 class="text-2xl font-bold text-dark mb-6 text-center">
                            <i class="fa fa-question-circle text-primary mr-2"></i>填空題
                        </h2>
                        <div id="questionText" class="text-[clamp(1.1rem,2.5vw,1.4rem)] leading-relaxed text-gray-800 mb-8">
                            請填入正確的字詞
                        </div>
                        <div class="text-center">
                            <button onclick="speakCurrent()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-all duration-300">
                                <i class="fa fa-volume-up mr-2"></i>朗讀
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 卡片背面 (答案) -->
                <div class="card-back bg-gradient-to-br from-secondary to-primary rounded-2xl shadow-xl p-8 flex flex-col justify-center items-center text-white">
                    <div class="w-full">
                        <h2 class="text-2xl font-bold mb-6 text-center">
                            <i class="fa fa-check-circle mr-2"></i>正確答案
                        </h2>
                        <div id="answerText" class="text-[clamp(1.1rem,2.5vw,1.4rem)] leading-relaxed mb-8">
                            答案將顯示於此
                        </div>
                        <div class="text-center">
                            <button onclick="speakAnswer()" class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition-all duration-300">
                                <i class="fa fa-volume-up mr-2"></i>朗讀答案
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 課文說明模態框 -->
        <div id="lessonModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6 border-b">
                    <div class="flex justify-between items-center">
                        <h3 class="text-2xl font-bold text-dark">
                            <i class="fa fa-book text-primary mr-2"></i>課文核心價值
                        </h3>
                        <button onclick="closeLessonInfo()" class="text-gray-500 hover:text-gray-700 text-2xl">
                            <i class="fa fa-times"></i>
                        </button>
                    </div>
                </div>
                <div class="p-6">
                    <div class="space-y-6">
                        <div>
                            <h4 class="text-xl font-bold text-primary mb-3">
                                <i class="fa fa-star mr-2"></i>核心價值
                            </h4>
                            <ul class="space-y-2 text-gray-700">
                                <li class="flex items-start">
                                    <i class="fa fa-check-circle text-green-500 mt-1 mr-2"></i>
                                    <span>珍惜純真的心靈：透過小王子的純真與成人世界的對比，提醒我們保持內心的純真</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fa fa-check-circle text-green-500 mt-1 mr-2"></i>
                                    <span>重視真摯的友誼：強調人與人之間真誠相處的重要性</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fa fa-check-circle text-green-500 mt-1 mr-2"></i>
                                    <span>勇於面對內心：鼓勵讀者勇於表達自己的想法和感受</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fa fa-check-circle text-green-500 mt-1 mr-2"></i>
                                    <span>尊重個體差異：接納並尊重與自己不同的想法和興趣</span>
                                </li>
                            </ul>
                        </div>

                        <div>
                            <h4 class="text-xl font-bold text-primary mb-3">
                                <i class="fa fa-lightbulb-o mr-2"></i>帶給讀者的啟示
                            </h4>
                            <ul class="space-y-2 text-gray-700">
                                <li class="flex items-start">
                                    <i class="fa fa-arrow-right text-blue-500 mt-1 mr-2"></i>
                                    <span>不要被世俗的眼光束縛，保持對世界的好奇心和想像力</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fa fa-arrow-right text-blue-500 mt-1 mr-2"></i>
                                    <span>真實的友誼建立在相互理解和尊重的基礎上</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fa fa-arrow-right text-blue-500 mt-1 mr-2"></i>
                                    <span>勇於表達自己的想法，不要害怕與他人不同</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fa fa-arrow-right text-blue-500 mt-1 mr-2"></i>
                                    <span>學會從不同的角度看待事物，理解他人的感受</span>
                                </li>
                            </ul>
                        </div>

                        <div>
                            <h4 class="text-xl font-bold text-primary mb-3">
                                <i class="fa fa-info-circle mr-2"></i>課文背景
                            </h4>
                            <p class="text-gray-700 leading-relaxed">
                                《奇特的朋友》改寫自法國作家安東尼·聖修伯里的經典作品《小王子》。
                                故事透過飛行員與小王子在沙漠中的相遇，展現了童真與成人世界的衝突，
                                以及真摯友誼的珍貴。這篇課文不僅是語文學習的素材，更是引導學生思考
                                人生價值和人際關係的重要文本。
                            </p>
                        </div>

                        <div>
                            <h4 class="text-xl font-bold text-primary mb-3">
                                <i class="fa fa-file-text-o mr-2"></i>課文全文
                            </h4>
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 text-gray-700 leading-relaxed">
                                <p class="mb-3">那一天，因為飛機故障，我一個人在沙漠過了一夜。第二天早上，有個細細的聲音叫醒我：「請你……幫我畫一隻綿羊！」</p>
                                <p class="mb-3">我跳了起來，不敢相信的揉著眼，這裡是沙漠正中央，這離人煙快要兩千公里，這個小男孩怎麼出現的？</p>
                                <p class="mb-3">看我不說話，他溫柔而客氣的重複說著：「請你畫一隻綿羊給我好嗎？」他是誰？他從哪兒來？他為什麼要一隻綿羊？那時的我，竟然沒說出心中的疑問，就拿出紙和筆，打算幫他的忙。</p>
                                <p class="mb-3">我不太會畫畫，上一次畫畫是在六歲的時候，我畫了一張畫，畫完後直冒冷汗，心裡害怕極了！可是每個大人都很不以為然的說：「不過是一頂帽子，怎麼會可怕呢？」</p>
                                <p class="mb-3">那時，我剛讀完一本關於原始森林的書，我畫的真的不是帽子。</p>
                                <p class="mb-3">小男孩用期待的眼神看著我：「你可以開始畫了嗎？」該怎麼畫一隻綿羊呢？我心裡半點想法都沒有，只好在紙上畫了六歲時的那幅畫。</p>
                                <p class="mb-3">小男孩一看到就後退一大步：「不！不！這太可怕了，我不要一條吞下大象的蟒蛇！」</p>
                                <p class="mb-3">這時，換我驚訝得說不出話來，他怎麼知道的？</p>
                                <p class="mb-3">我畫的就是一條正在消化大象的蟒蛇？這就是我和「小王子」認識的經過，在他離開前，我聽他說了很多的故事。</p>
                                <p>一直到現在，他還是我心中那位最奇特的朋友。</p>
                            </div>
                        </div>

                        <div class="mt-6 pt-6 border-t border-gray-200">
                            <h4 class="text-xl font-bold text-primary mb-4">
                                <i class="fa fa-star mr-2"></i>《小王子》課文核心價值
                            </h4>
                            <div class="space-y-4 text-gray-700">
                                <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                                    <h5 class="font-bold mb-2">引導感知「表象與本質」</h5>
                                    <p>告訴我們真正重要的事物無法用眼睛看見，需用心感知，打破成人世界的功利視角，守護童真與纯粹。</p>
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                                    <h5 class="font-bold mb-2">傳遞「陪伴與責任」</h5>
                                    <p>透過小王子與玫瑰、狐狸的羈絆，闡釋「馴服」的意義——用心經營的連接，會帶來責任與珍惜，抵禦孤獨。</p>
                                </div>
                                <div class="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500">
                                    <h5 class="font-bold mb-2">呼喚「初心與真誠」</h5>
                                    <p>批判成人世界的虛浮與麻木（如追逐權力、名利的星球居民），鼓勵人們保留初心，以真誠對待他人與世界。</p>
                                </div>
                                <div class="bg-orange-50 p-4 rounded-lg border-l-4 border-orange-500">
                                    <h5 class="font-bold mb-2">珍藏「理解與共鳴」</h5>
                                    <p>強調精神層面的認同是珍貴的，真正的朋友能看穿表象、懂彼此的內心，這是治愈孤獨的核心力量。</p>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 pt-6 border-t border-gray-200">
                            <h4 class="text-xl font-bold text-primary mb-4">
                                <i class="fa fa-book mr-2"></i>《小王子》核心片段筆記
                            </h4>
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 text-gray-700">
                                <p class="mb-4">這段文字是《小王子》中敘述者與小王子相識的核心片段，既講述了一段充滿奇幻色彩的相遇經歷，又暗含了作品的核心主題，主要表達了以下幾層意思：</p>
                                
                                <div class="space-y-4">
                                    <div>
                                        <h5 class="font-bold text-primary mb-2">1. 表層：一段奇幻的相識經過</h5>
                                        <p>敘述者（飛行員）因飛機故障被困沙漠，在與世隔絕的環境中，被突然出現的小男孩（小王子）叫醒。小王子的請求（畫綿羊）、以及他能看懂敘述者童年畫作（不是帽子，而是吞下大象的蟒蛇）的細節，構成了兩人相識的契機，充滿了神秘和童真的氛圍。</p>
                                    </div>
                                    
                                    <div>
                                        <h5 class="font-bold text-primary mb-2">2. 深層：孩子的純真 vs 成人的功利視角</h5>
                                        <p>這是片段的核心表達。敘述者6歲時的畫作，被所有大人誤解為「帽子」，他們只關注表面的、實用的東西，無法理解孩子眼中的「蟒蛇吞大象」這種充滿想象力的畫面；而小王子一眼就看透了畫作的本質，這體現了孩子的純真視角能洞察事物的內在，而成人往往被世俗的認知束縛，失去了對「本質」的感知力。</p>
                                    </div>
                                    
                                    <div>
                                        <h5 class="font-bold text-primary mb-2">3. 情感層面：孤獨中的理解與共鳴</h5>
                                        <p>敘述者被困沙漠，處於物理上的孤獨；而他童年的畫作被誤解，又處於精神上的孤獨。小王子的出現，不僅打破了他的物理孤獨，更重要的是，小王子能看懂他的畫，實現了精神上的理解與共鳴。這種共鳴讓小王子成為了他心中「最奇特的朋友」。</p>
                                    </div>
                                    
                                    <div>
                                        <h5 class="font-bold text-primary mb-2">4. 伏筆：對「本質」的追寻</h5>
                                        <p>片段中「蟒蛇吞大象」的畫，是《小王子》全書的重要意象，它暗示了作品的核心命題——真正重要的東西，用眼睛是看不見的，要用心去感受。小王子能看懂這幅畫，也預示了他是那個能理解「本質」的人。</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 pt-6 border-t border-gray-200">
                            <h4 class="text-xl font-bold text-primary mb-4">
                                <i class="fa fa-lightbulb-o mr-2"></i>片段關鍵意象解析
                            </h4>
                            <div class="space-y-6 text-gray-700">
                                <div class="bg-blue-50 p-4 rounded-lg">
                                    <h5 class="font-bold text-blue-700 mb-3">1. 蟒蛇吞大象的畫</h5>
                                    <div class="space-y-3">
                                        <div>
                                            <h6 class="font-semibold">▌表層含義：</h6>
                                            <p>敘述者六歲時的創作，被大人誤解為「帽子」，僅有小王子能看穿其「蟒蛇吞大象」的本貌。</p>
                                        </div>
                                        <div>
                                            <h6 class="font-semibold">▌深層寓意（結合全書）：</h6>
                                            <ul class="list-disc pl-5 space-y-2">
                                                <li>童真與成人世界的割裂標誌——全書中小王子拜訪的星球上，國王、虛榮者、商人等大人，都和誤解畫作的大人一樣，執著於虛無的表象（權力、名聲、財富），無法感知事物內在價值。</li>
                                                <li>「用心感知本質」的核心命題延伸——這幅畫不僅是兩人相識的鑰匙，更貫穿全書：小王子對玫瑰的偏愛、與狐狸建立的「馴服」關係，都是「看穿表象、認知本質」的體現。</li>
                                                <li>孤獨與共鳴的橋梁——敘述者因畫作被誤解而封閉畫筆，如同他被困沙漠的孤獨；小王子的理解，不僅解開了他童年的遺憾，更讓他重新相信「真誠的連接」。</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-green-50 p-4 rounded-lg">
                                    <h5 class="font-bold text-green-700 mb-3">2. 綿羊</h5>
                                    <div class="space-y-3">
                                        <div>
                                            <h6 class="font-semibold">▌表層含義：</h6>
                                            <p>小王子主動提出的請求，是他與敘述者相遇後的核心需求，也是兩人結緣的契機。</p>
                                        </div>
                                        <div>
                                            <h6 class="font-semibold">▌深層寓意（結合全書）：</h6>
                                            <ul class="list-disc pl-5 space-y-2">
                                                <li>純真的「守護欲」與「責任感」——全書中小王子的星球上，有威脅玫瑰的猴面包樹，他請求畫一隻綿羊，本質是希望有一個溫馴的存在，守護心愛的玫瑰不被傷害。</li>
                                                <li>「馴服」關係的預示——狐狸告訴小王子「馴服就是建立聯繫」，而小王子請求畫綿羊的行為，正是主動與敘述者建立聯繫的開始。</li>
                                                <li>對「簡單美好」的執著——小王子拒絕敘述者畫的生病綿羊、老綿羊，執意要一隻「能放在盒子裡」的綿羊，體現他對「純淨、簡單、可控的美好」的追求。</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 pt-6 border-t border-gray-200">
                            <h4 class="text-xl font-bold text-primary mb-4">
                                <i class="fa fa-school mr-2"></i>校園場景意象比喻
                            </h4>
                            <div class="space-y-6 text-gray-700">
                                <div class="bg-yellow-50 p-4 rounded-lg">
                                    <h5 class="font-bold text-yellow-700 mb-3">1. 對應「蟒蛇吞大象的畫」（表象vs本質/童真vs功利）</h5>
                                    
                                    <div class="space-y-4">
                                        <div class="bg-white p-3 rounded shadow-sm">
                                            <h6 class="font-semibold mb-2">▌師生間比喻：</h6>
                                            <p>小明在課堂畫畫作業上，畫了一張「歪歪扭扭的蠟燭」，老師批改時覺得畫得潦草、不符合美術標準，給了低分；但同桌小華看懂了——蠟燭旁邊有個小小的「加油」字，那是小明想畫給生病缺課的好朋友的祝福，蠟燭代表「陪伴與鼓勵」。</p>
                                        </div>
                                        
                                        <div class="bg-white p-3 rounded shadow-sm">
                                            <h6 class="font-semibold mb-2">▌同學間比喻：</h6>
                                            <p>班級組織「分享小禮物」活動，小宇帶了一個用紙盒做的粗糙小船，同學們都笑它不好看、不值錢；只有小航知道，這艘小船是小宇花了三天課餘時間做的，船身上的每一道折痕，都是小宇想送給他的「友情紀念」。</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-pink-50 p-4 rounded-lg">
                                    <h5 class="font-bold text-pink-700 mb-3">2. 對應「綿羊」（守護/珍惜/用心經營的連接）</h5>
                                    
                                    <div class="space-y-4">
                                        <div class="bg-white p-3 rounded shadow-sm">
                                            <h6 class="font-semibold mb-2">▌師生間比喻：</h6>
                                            <p>班主任李老師每天放學後，都會留在教室陪膽小的小琪背課文——小琪怕自己背不好被同學笑，不敢在課上發言。李老師從不催促，耐心聽她反復練習，就像小王子執意要一隻「溫馴的綿羊」。</p>
                                        </div>
                                        
                                        <div class="bg-white p-3 rounded shadow-sm">
                                            <h6 class="font-semibold mb-2">▌同學間比喻：</h6>
                                            <p>小雨的數學筆記不小心被弄濕，頁面皺巴巴的，她傷心得快哭了。同桌小軒主動把自己的筆記借給她，還用彩筆幫她修補濕掉的頁面，每天放學陪她一起復習——小雨的筆記對別人來說只是一本書，但對小雨來說是「努力的見證」。</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-6 border-t text-center">
                    <button onclick="closeLessonInfo()" class="bg-primary hover:bg-primary/90 text-white px-6 py-3 rounded-lg transition-all duration-300">
                        <i class="fa fa-times mr-2"></i>關閉
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- 頁尾 -->
    <footer class="bg-dark text-white py-6 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p class="mb-2">《奇特的朋友》課文重點字詞練習</p>
            <p class="text-sm opacity-70">適用於GitHub Pages部署</p>
        </div>
    </footer>

    <script>
        // 題目數據
        const cards = [
            {
                question: "那一天，因為飛機<span class='fill-blank' data-answer='故障'></span>，我一個人在<span class='fill-blank' data-answer='沙漠'></span>過了一夜。",
                answer: "那一天，因為飛機<span class='answer-revealed'>故障</span>，我一個人在<span class='answer-revealed'>沙漠</span>過了一夜。",
                reading: "那一天，因為飛機故障，我一個人在沙漠過了一夜。"
            },
            {
                question: "第二天早上，有個細細的聲音叫醒我：「請你……幫我畫一隻<span class='fill-blank' data-answer='綿羊'></span>！」",
                answer: "第二天早上，有個細細的聲音叫醒我：「請你……幫我畫一隻<span class='answer-revealed'>綿羊</span>！」",
                reading: "第二天早上，有個細細的聲音叫醒我：「請你……幫我畫一隻綿羊！」"
            },
            {
                question: "我跳了起來，不敢相信的<span class='fill-blank' data-answer='揉著眼'></span>，這裡是<span class='fill-blank' data-answer='沙漠'></span>正<span class='fill-blank' data-answer='中央'></span>。",
                answer: "我跳了起來，不敢相信的<span class='answer-revealed'>揉著眼</span>，這裡是<span class='answer-revealed'>沙漠</span>正<span class='answer-revealed'>中央</span>。",
                reading: "我跳了起來，不敢相信的揉著眼，這裡是沙漠正中央。"
            },
            {
                question: "這離<span class='fill-blank' data-answer='人煙'></span>快要兩千公里，這個小<span class='fill-blank' data-answer='男'></span>孩怎麼出現的？",
                answer: "這離<span class='answer-revealed'>人煙</span>快要兩千公里，這個小<span class='answer-revealed'>男</span>孩怎麼出現的？",
                reading: "這離人煙快要兩千公里，這個小男孩怎麼出現的？"
            },
            {
                question: "看我不說話，他溫柔而客氣的<span class='fill-blank' data-answer='重複'></span>說著：「請你畫一隻綿羊給我好嗎？」",
                answer: "看我不說話，他溫柔而客氣的<span class='answer-revealed'>重複</span>說著：「請你畫一隻綿羊給我好嗎？」",
                reading: "看我不說話，他溫柔而客氣的重複說著：「請你畫一隻綿羊給我好嗎？」"
            },
            {
                question: "他是誰？他從哪兒來？他為什麼要一隻綿羊？那時的我，竟然沒說出心中的<span class='fill-blank' data-answer='疑問'></span>。",
                answer: "他是誰？他從哪兒來？他為什麼要一隻綿羊？那時的我，竟然沒說出心中的<span class='answer-revealed'>疑問</span>。",
                reading: "他是誰？他從哪兒來？他為什麼要一隻綿羊？那時的我，竟然沒說出心中的疑問。"
            },
            {
                question: "就拿出紙和筆，<span class='fill-blank' data-answer='打算'></span>幫他的忙。",
                answer: "就拿出紙和筆，<span class='answer-revealed'>打算</span>幫他的忙。",
                reading: "就拿出紙和筆，打算幫他的忙。"
            },
            {
                question: "我不太會畫畫，上一次畫畫是在六<span class='fill-blank' data-answer='歲'></span>的時候。",
                answer: "我不太會畫畫，上一次畫畫是在六<span class='answer-revealed'>歲</span>的時候。",
                reading: "我不太會畫畫，上一次畫畫是在六歲的時候。"
            },
            {
                question: "我畫了一張畫，畫完後直冒冷汗，心裡害怕極了！可是每個大人都很<span class='fill-blank' data-answer='不以為然'></span>的說。",
                answer: "我畫了一張畫，畫完後直冒冷汗，心裡害怕極了！可是每個大人都很<span class='answer-revealed'>不以為然</span>的說。",
                reading: "我畫了一張畫，畫完後直冒冷汗，心裡害怕極了！可是每個大人都很不以為然的說。"
            },
            {
                question: "「不過是一頂<span class='fill-blank' data-answer='帽子'></span>，怎麼會可怕呢？」",
                answer: "「不過是一頂<span class='answer-revealed'>帽子</span>，怎麼會可怕呢？」",
                reading: "「不過是一頂帽子，怎麼會可怕呢？」"
            },
            {
                question: "那時，我剛讀完一本關於<span class='fill-blank' data-answer='原始'></span>森林的書，我畫的真的不是帽子。",
                answer: "那時，我剛讀完一本關於<span class='answer-revealed'>原始</span>森林的書，我畫的真的不是帽子。",
                reading: "那時，我剛讀完一本關於原始森林的書，我畫的真的不是帽子。"
            },
            {
                question: "小男孩一看到就<span class='fill-blank' data-answer='後退'></span>一大步：「不！不！這太可怕了。」",
                answer: "小男孩一看到就<span class='answer-revealed'>後退</span>一大步：「不！不！這太可怕了。」",
                reading: "小男孩一看到就後退一大步：「不！不！這太可怕了。」"
            },
            {
                question: "我不要一條<span class='fill-blank' data-answer='吞下'></span><span class='fill-blank' data-answer='大象'></span>的<span class='fill-blank' data-answer='蟒蛇'></span>！",
                answer: "我不要一條<span class='answer-revealed'>吞下</span><span class='answer-revealed'>大象</span>的<span class='answer-revealed'>蟒蛇</span>！",
                reading: "我不要一條吞下大象的蟒蛇！"
            },
            {
                question: "這時，換我<span class='fill-blank' data-answer='驚訝'></span>得說不出話來，他怎麼知道的？",
                answer: "這時，換我<span class='answer-revealed'>驚訝</span>得說不出話來，他怎麼知道的？",
                reading: "這時，換我驚訝得說不出話來，他怎麼知道的？"
            },
            {
                question: "我畫的就是一條正在消化大象的<span class='fill-blank' data-answer='蟒蛇'></span>？",
                answer: "我畫的就是一條正在消化大象的<span class='answer-revealed'>蟒蛇</span>？",
                reading: "我畫的就是一條正在消化大象的蟒蛇？"
            },
            {
                question: "這就是我和「小王子」認識的經過，在他離開前，我聽他說了很多的故事。",
                answer: "這就是我和「小王子」認識的經過，在他離開前，我聽他說了很多的故事。",
                reading: "這就是我和「小王子」認識的經過，在他離開前，我聽他說了很多的故事。"
            },
            {
                question: "一直到現在，他還是我心中那位最<span class='fill-blank' data-answer='奇特'></span>的朋友。",
                answer: "一直到現在，他還是我心中那位最<span class='answer-revealed'>奇特</span>的朋友。",
                reading: "一直到現在，他還是我心中那位最奇特的朋友。"
            },
            {
                question: "飛機發生<span class='fill-blank' data-answer='故障'></span>，迫降在<span class='fill-blank' data-answer='沙漠'></span>中。",
                answer: "飛機發生<span class='answer-revealed'>故障</span>，迫降在<span class='answer-revealed'>沙漠</span>中。",
                reading: "飛機發生故障，迫降在沙漠中。"
            },
            {
                question: "他是一個很<span class='fill-blank' data-answer='奇特'></span>的小<span class='fill-blank' data-answer='男'></span>孩。",
                answer: "他是一個很<span class='answer-revealed'>奇特</span>的小<span class='answer-revealed'>男</span>孩。",
                reading: "他是一個很奇特的小男孩。"
            },
            {
                question: "在沙漠的正<span class='fill-blank' data-answer='中央'></span>，竟然遇到了一隻<span class='fill-blank' data-answer='綿羊'></span>。",
                answer: "在沙漠的正<span class='answer-revealed'>中央</span>，竟然遇到了一隻<span class='answer-revealed'>綿羊</span>。",
                reading: "在沙漠的正中央，竟然遇到了一隻綿羊。"
            }
        ];

        let currentCardIndex = 0;
        let isAnswerRevealed = false;

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            renderCurrentCard();
            updateCardCounter();
        });

        // 渲染當前卡片
        function renderCurrentCard() {
            const card = cards[currentCardIndex];
            document.getElementById('questionText').innerHTML = card.question;
            document.getElementById('answerText').innerHTML = card.answer;
            isAnswerRevealed = false;
            
            // 重置卡片翻轉狀態
            const cardElement = document.getElementById('card');
            cardElement.classList.remove('card-flipped');
        }

        // 更新卡片計數器
        function updateCardCounter() {
            document.getElementById('currentCard').textContent = currentCardIndex + 1;
            document.getElementById('totalCards').textContent = cards.length;
        }

        // 上一題
        function prevCard() {
            currentCardIndex = (currentCardIndex - 1 + cards.length) % cards.length;
            renderCurrentCard();
            updateCardCounter();
        }

        // 下一題
        function nextCard() {
            currentCardIndex = (currentCardIndex + 1) % cards.length;
            renderCurrentCard();
            updateCardCounter();
        }

        // 切換答案顯示
        function toggleAnswer() {
            const cardElement = document.getElementById('card');
            cardElement.classList.toggle('card-flipped');
            isAnswerRevealed = !isAnswerRevealed;
        }

        // 朗讀當前題目
        function speakCurrent() {
            const text = isAnswerRevealed ? 
                cards[currentCardIndex].reading : 
                cards[currentCardIndex].reading;
            
            speakText(text);
        }

        // 朗讀答案
        function speakAnswer() {
            speakText(cards[currentCardIndex].reading);
        }

        // 文字轉語音
        function speakText(text) {
            if ('speechSynthesis' in window) {
                // 停止任何正在進行的朗讀
                window.speechSynthesis.cancel();
                
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'zh-TW';
                utterance.rate = 0.9;
                utterance.pitch = 1.1;
                utterance.volume = 1;
                
                window.speechSynthesis.speak(utterance);
            } else {
                alert('您的瀏覽器不支援文字轉語音功能');
            }
        }

        // 隨機排序
        function shuffleCards() {
            for (let i = cards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [cards[i], cards[j]] = [cards[j], cards[i]];
            }
            currentCardIndex = 0;
            renderCurrentCard();
            updateCardCounter();
        }

        // 鍵盤快捷鍵
        document.addEventListener('keydown', function(e) {
            switch(e.key) {
                case 'ArrowLeft':
                    prevCard();
                    break;
                case 'ArrowRight':
                    nextCard();
                    break;
                case ' ':
                    e.preventDefault();
                    toggleAnswer();
                    break;
                case 'Enter':
                    speakCurrent();
                    break;
            }
        });

        // 觸控手勢支援
        let touchStartX = 0;
        let touchEndX = 0;

        document.getElementById('card').addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.getElementById('card').addEventListener('touchend', function(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;

            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    nextCard(); // 向左滑動
                } else {
                    prevCard(); // 向右滑動
                }
            }
        }

        // 課文說明模態框控制
        function showLessonInfo() {
            document.getElementById('lessonModal').classList.remove('hidden');
            // 防止背景滾動
            document.body.style.overflow = 'hidden';
        }

        function closeLessonInfo() {
            document.getElementById('lessonModal').classList.add('hidden');
            // 恢復背景滾動
            document.body.style.overflow = '';
        }

        // 點擊模態框背景關閉
        document.getElementById('lessonModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeLessonInfo();
            }
        });

        // ESC鍵關閉模態框
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && !document.getElementById('lessonModal').classList.contains('hidden')) {
                closeLessonInfo();
            }
        });
    </script>
</body>
</html>
