<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>AI è¬ç”¨å–®å­—éª¨æ¶ 9.7 - ä¸­è‹±é›™è§£è¯ç¶²ç‰ˆ</title>
    <style>
        :root { --prefix-clr: #ef4444; --root-clr: #2563eb; --suffix-clr: #10b981; --bg: #f1f5f9; }
        body { font-family: 'Segoe UI', 'PingFang TC', sans-serif; background: var(--bg); padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .container { max-width: 1000px; width: 100%; }
        .lab-station { background: #fff; padding: 25px; border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; margin-bottom: 20px; position: sticky; top: 10px; z-index: 1000; border: 1px solid #e2e8f0; }
        .display-area { display: flex; justify-content: center; gap: 8px; margin-bottom: 10px; }
        .part-box { padding: 8px 15px; border-radius: 10px; background: #e2e8f0; font-weight: 800; font-size: 1.2rem; }
        .result-panel { background: #1e293b; color: #f8fafc; padding: 25px; border-radius: 20px; text-align: left; display: none; margin-top: 15px; border-left: 6px solid #fbbf24; }
        .translation-text { font-size: 2rem; color: #fbbf24; font-weight: 900; }
        .eng-def { color: #94a3b8; font-style: italic; font-size: 0.95rem; margin-top: 5px; border-left: 2px solid #334155; padding-left: 10px; }
        .audio-btn { background: #4f46e5; color: white; border: none; padding: 6px 15px; border-radius: 20px; cursor: pointer; margin-left: 10px; font-size: 0.8rem; vertical-align: middle; }
        .control-panel { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        .column { background: #fff; padding: 15px; border-radius: 18px; height: 50vh; overflow-y: auto; border: 1px solid #e2e8f0; }
        button { width: 100%; padding: 10px; margin: 4px 0; border: 1px solid #f1f5f9; border-radius: 8px; cursor: pointer; background: #f8fafc; text-align: left; font-size: 0.85rem; }
        button.active { background: #1e293b !important; color: white !important; }
        .badge { background: #10b981; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.7rem; margin-right: 5px; }
    </style>
</head>
<body>

<div class="container">
    <div class="lab-station">
        <div id="status" style="font-size:0.8rem; color:#64748b; margin-bottom:5px;">æ‹¼æ¹Šå–®å­—é›¶ä»¶ä»¥å•Ÿå‹•è¯ç¶²æŸ¥è©¢</div>
        <div class="display-area">
            <div class="part-box" id="boxPre">-</div>
            <div class="part-box" id="boxRoot">è«‹é¸å­—æ ¹</div>
            <div class="part-box" id="boxSuf">-</div>
        </div>
        <h2 id="resultWord" style="margin: 0; font-size: 2.5rem; text-transform: lowercase; color:#1e293b;">---</h2>
        
        <div class="result-panel" id="resultPanel">
            <div>
                <span id="wordTrans" class="translation-text">æŸ¥è©¢ä¸­...</span>
                <button id="audioBtn" class="audio-btn" style="display:none;">ğŸ”Š ç™¼éŸ³</button>
            </div>
            <div id="wordPos" style="margin: 8px 0; color:#10b981; font-weight:bold;"></div>
            <div id="chineseDef" style="color:#cbd5e1; font-size:1.1rem; font-weight:500;"></div>
            <div id="englishDef" class="eng-def"></div>
            <div id="logicText" style="margin-top:15px; padding-top:15px; border-top:1px solid #334155; font-size:0.85rem; color:#64748b;"></div>
        </div>
    </div>

    <div class="control-panel">
        <div class="column" id="preCol"><h3>1. å‰ç¶´</h3><button onclick="selectPart('pre', '')">âˆ… NONE</button></div>
        <div class="column" id="rootCol"><h3>2. å­—æ ¹</h3><button onclick="selectPart('root', '')">âˆ… NONE</button></div>
        <div class="column" id="sufCol"><h3>3. å¾Œç¶´</h3><button onclick="selectPart('suf', '')">âˆ… NONE</button></div>
    </div>
</div>

<script>
    // å…§å»ºæ ¸å¿ƒä¸­æ–‡å­—å…¸ï¼Œç¢ºä¿å¸¸ç”¨å­—å³æ™‚åæ‡‰
    const zhDict = {
        "report": "å ±å‘Šã€å ±å°", "reporter": "è¨˜è€…", "support": "æ”¯æŒã€æ‰¶é¤Š", "transport": "é‹è¼¸", 
        "reactive": "åæ‡‰æ€§çš„", "promotion": "ä¿ƒéŠ·ã€å‡è·", "active": "æ´»èºçš„", "import": "é€²å£",
        "export": "å‡ºå£", "predict": "é æ¸¬", "inspect": "æª¢æŸ¥", "invisible": "çœ‹ä¸è¦‹çš„"
    };

    const config = {
        pre: { "In": "å‘å…§/ä¸", "Ex": "å‘å¤–", "Re": "å›/å†", "Pro": "å‘å‰", "Trans": "æ©«è·¨", "Sub": "ä¸‹", "Con": "å…±" },
        root: { "Act": "å‹•", "Port": "æ¬é‹", "Vis": "çœ‹", "Spect": "å¯Ÿ", "Dict": "èªª", "Ject": "æŠ•", "Mot": "ç§»å‹•", "Scrib": "å¯«" },
        suf: { "ion": "åè©", "ive": "å½¢å®¹è©", "able": "å½¢å®¹è©(èƒ½)", "or": "è€…/ç‰©", "er": "è€…/ç‰©", "ly": "å‰¯è©", "ate": "å‹•è©" }
    };

    let state = { pre: '', root: '', suf: '' };
    let audio = null;

    function init() {
        ['pre', 'root', 'suf'].forEach(type => {
            const container = document.getElementById(`${type}Col`);
            Object.entries(config[type]).forEach(([k, v]) => {
                const b = document.createElement('button');
                b.id = `btn-${type}-${k}`;
                b.innerHTML = `<strong>${k}</strong> <small>${v}</small>`;
                b.onclick = () => selectPart(type, k);
                container.appendChild(b);
            });
        });
    }

    function selectPart(type, key) {
        state[type] = key;
        document.querySelectorAll(`#${type}Col button`).forEach(b => b.classList.remove('active'));
        if(key) document.getElementById(`btn-${type}-${key}`).classList.add('active');
        document.getElementById(`box${type.charAt(0).toUpperCase() + type.slice(1)}`).innerText = key || '-';
        
        const word = (state.pre + state.root + state.suf).toLowerCase();
        document.getElementById('resultWord').innerText = word || "---";
        if(word.length > 2) searchWord(word);
    }

    async function searchWord(word) {
        const panel = document.getElementById('resultPanel');
        panel.style.display = 'block';
        document.getElementById('status').innerText = "ğŸŒ æ­£åœ¨å¾ Google/Merriam èª¿ç”¨æ•¸æ“š...";
        
        // å„ªå…ˆé¡¯ç¤ºå…§å»ºä¸­æ–‡
        document.getElementById('wordTrans').innerText = word.toUpperCase();
        document.getElementById('chineseDef').innerText = zhDict[word] || "é»æ“Šç™¼éŸ³æˆ–æŸ¥çœ‹è‹±æ–‡å®šç¾©";

        try {
            const res = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`);
            const data = await res.json();
            
            if (data[0]) {
                const entry = data[0];
                document.getElementById('wordPos').innerHTML = `<span class="badge">POS</span> ${entry.meanings[0].partOfSpeech.toUpperCase()}`;
                document.getElementById('englishDef').innerText = "Definition: " + entry.meanings[0].definitions[0].definition;
                
                // ç™¼éŸ³è™•ç†
                const audioLink = entry.phonetics.find(p => p.audio)?.audio;
                if (audioLink) {
                    audio = new Audio(audioLink);
                    document.getElementById('audioBtn').style.display = 'inline-block';
                    document.getElementById('audioBtn').onclick = () => audio.play();
                }
            }
        } catch (e) {
            document.getElementById('englishDef').innerText = "æ­¤æ‹¼å¯«çµ„åˆåœ¨å®˜æ–¹å­—å…¸ä¸­è¼ƒç‚ºç½•è¦‹ï¼Œè«‹åƒè€ƒé›¶ä»¶é‚è¼¯ã€‚";
        }

        document.getElementById('logicText').innerHTML = `é‚è¼¯ï¼š${config.pre[state.pre]||''} + ${config.root[state.root]||''} + ${config.suf[state.suf]||''}`;
    }
    init();
</script>
</body>
</html>
